<Window x:Class="LightBulb.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        Title="LightBulb"
        Width="350"
        AllowsTransparency="True"
        Background="Transparent"
        DataContext="{Binding Main, Source={StaticResource Locator}}"
        Deactivated="MainWindow_OnDeactivated"
        FocusManager.FocusedElement="{Binding ElementName=VideoIDTextBox}"
        FontFamily="{DynamicResource MaterialDesignFont}"
        Loaded="MainWindow_OnLoaded"
        ShowInTaskbar="False"
        SizeToContent="Height"
        SnapsToDevicePixels="True"
        TextElement.FontSize="13"
        TextElement.FontWeight="Regular"
        TextElement.Foreground="{DynamicResource SecondaryTextBrush}"
        TextOptions.TextFormattingMode="Ideal"
        TextOptions.TextRenderingMode="Auto"
        UseLayoutRounding="True"
        WindowStartupLocation="Manual"
        WindowStyle="None"
        mc:Ignorable="d">
    <Border Background="{DynamicResource PrimaryHueDarkBrush}"
            BorderBrush="{DynamicResource MiscBrush}"
            BorderThickness="1"
            CornerRadius="12,12,0,0">
        <StackPanel Orientation="Vertical">
            <!--  Header  -->
            <Border x:Name="HeaderBorder"
                    Height="50"
                    Margin="0,0,0,5"
                    Background="{DynamicResource PrimaryHueDarkBrush}"
                    CornerRadius="12,12,0,0"
                    MouseDown="HeaderBorder_OnMouseDown"
                    TextElement.Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}">
                <WrapPanel Margin="0,5,0,0" VerticalAlignment="Center">
                    <!--  On/Off button and logo  -->
                    <ToggleButton Margin="5,0,0,0"
                                  IsChecked="{Binding IsEnabled}"
                                  ToolTip="Enable or disable the gamma control">
                        <ToggleButton.Style>
                            <Style BasedOn="{StaticResource MaterialDesignActionAccentToggleButton}" TargetType="ToggleButton">
                                <Setter Property="materialDesign:ToggleButtonAssist.OnContent">
                                    <Setter.Value>
                                        <materialDesign:PackIcon Kind="LightbulbOutline" />
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ToggleButton.Style>
                        <ToggleButton.ContextMenu>
                            <ContextMenu>
                                <MenuItem Command="{Binding DisableForCommand}"
                                          CommandParameter="60000"
                                          Header="Disable for 1 min" />
                                <MenuItem Command="{Binding DisableForCommand}"
                                          CommandParameter="300000"
                                          Header="Disable for 5 mins" />
                                <MenuItem Command="{Binding DisableForCommand}"
                                          CommandParameter="1800000"
                                          Header="Disable for 30 mins" />
                                <MenuItem Command="{Binding DisableForCommand}"
                                          CommandParameter="3600000"
                                          Header="Disable for 1 hr" />
                                <MenuItem Command="{Binding DisableForCommand}"
                                          CommandParameter="5400000"
                                          Header="Disable for 3 hrs" />
                                <MenuItem Command="{Binding DisableForCommand}"
                                          CommandParameter="10800000"
                                          Header="Disable for 6 hrs" />
                                <MenuItem Command="{Binding DisableForCommand}"
                                          CommandParameter="21600000"
                                          Header="Disable for 12 hrs" />
                                <MenuItem Command="{Binding DisableForCommand}"
                                          CommandParameter="43200000"
                                          Header="Disable for 24 hrs" />
                            </ContextMenu>
                        </ToggleButton.ContextMenu>
                    </ToggleButton>

                    <!--  Application Name  -->
                    <TextBlock Margin="5,0,0,0"
                               VerticalAlignment="Center"
                               FontSize="16"
                               FontWeight="Bold"
                               Text="LightBulb" />
                </WrapPanel>
            </Border>

            <!--  Content  -->
            <StackPanel Background="{DynamicResource MaterialDesignPaper}" Orientation="Vertical">
                <!--  Day-time temperature  -->
                <TextBlock Margin="5">
                    <Run Text="Day-time color temperature:" />
                    <Run Foreground="{DynamicResource PrimaryTextBrush}" Text="{Binding Value, ElementName=MaxTempSlider, Mode=OneWay}" /><Run Text="K" />
                </TextBlock>
                <Slider x:Name="MaxTempSlider"
                        Margin="5,0,5,5"
                        IsSnapToTickEnabled="True"
                        LargeChange="1000"
                        Maximum="6500"
                        Minimum="{Binding Value, ElementName=MinTempSlider}"
                        SmallChange="100"
                        TickFrequency="100"
                        TickPlacement="BottomRight"
                        Value="{Binding Settings.MaxTemperature}" />

                <!--  Night-time temperature  -->
                <TextBlock Margin="5">
                    <Run Text="Night-time color temperature:" />
                    <Run Foreground="{DynamicResource PrimaryTextBrush}" Text="{Binding Value, ElementName=MinTempSlider, Mode=OneWay}" /><Run Text="K" />
                </TextBlock>
                <Slider x:Name="MinTempSlider"
                        Margin="5,0,5,5"
                        IsSnapToTickEnabled="True"
                        LargeChange="1000"
                        Maximum="{Binding Value, ElementName=MaxTempSlider}"
                        Minimum="2500"
                        SmallChange="100"
                        TickFrequency="100"
                        TickPlacement="BottomRight"
                        Value="{Binding Settings.MinTemperature}" />

                <!--  Polling enabled/disabled  -->
                <WrapPanel Orientation="Horizontal">
                    <TextBlock Margin="5"
                               Text="Enable gamma polling:"
                               ToolTip="Continuous polling makes sure the gamma settings are not overriden by Windows or other applications by refreshing it in small intervals. May have a slight impact on performance when this is enabled." />
                    <ToggleButton VerticalAlignment="Center" IsChecked="{Binding Settings.IsPollingEnabled}" />
                </WrapPanel>
            </StackPanel>
        </StackPanel>
    </Border>
</Window>
